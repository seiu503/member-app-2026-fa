

<script>

  // when page loads,
  document.addEventListener("DOMContentLoaded", function(){

  	console.log('dom loaded prefillModal');

  	var fullName = document.getElementById('tfa_330').value.substring(0,40);

  	console.log('fullName', fullName);
  	// Extract the value of the language the browser is set to:
		const getLang = navigator.language;
		console.log("getLang = ", getLang);
		const spanish = getLang.startsWith("es");

		// append hidden button to DOM
		var hiddenButton = document.createElement('button');
    hiddenButton.setAttribute("id", "hiddenButton");
		hiddenButton.setAttribute("data-modal-prefix-class", "simple-animated");
		hiddenButton.setAttribute("data-modal-content-id", "tfa_327"); // FA fieldset containing the modal elements
		hiddenButton.setAttribute("data-modal-title", `${spanish ? '¿Es Ud.' : 'Are you'} ${fullName}?`);
		hiddenButton.setAttribute("data-modal-close-text", `${spanish ? 'Sí, soy' : "Yes, I'm"} ${fullName}`);
		hiddenButton.setAttribute("data-modal-close-title", `${spanish ? 'Sí, soy' : "Yes, I'm"} ${fullName}`);
		hiddenButton.setAttribute("class", "js-modal invisible");
		document.body.insertBefore(hiddenButton, document.body.firstChild);

  	// check if IDs are prepopulated from query params
  	var urlParams = new URLSearchParams(window.location.search);
		var cId = urlParams.get('cId');
		var aId = urlParams.get('aId');

  	// check if FA found a single SF Contact
  	// and was able to populate the fullName field
  	// if cId and fullName both exist, simulate a click on the
  	// hidden button to trigger the modal opening
  	if (cId && aId && fullName) {
  		document.getElementById("hiddenButton").click();
  	}

  	// append link to linkInfo display div
  	const linkInfo = document.getElementById('tfa_331');
  	const linkHtml = `<button type="reset" class="custom-link-text js-modal-close">${spanish ? 'No soy' : "I'm not"} ${fullName}</button>`;

  	linkInfo.addEventListener('click', function() {
  		window.location.href = 'https://seiu503.tfaforms.net/803';
  	})

  	linkInfo.innerHTML += linkHtml;

  });

</script>

<style>

	#modal-title {
		font-size: 1.5em !important;
	}
/*	fullname display */
#tfa_330 {
		border: 0;
		font-size: 1.2em;
		font-weight: bold;
		background: transparent;
		text-align: center;
		margin: auto;
		padding: 10px 0;
	}

/*	add spacing between elements in modal */
	#tfa_331-HTML {
		margin: 10px 0 30px 0;
	}

	dialog {
	  display: block;
	  border: 0;
	}
	/* screenreader only style */
	.invisible {
		position: absolute;
    top: -1000px;
    left: -1000px;
    height: 1px;
    width: 1px;
    text-align: left;
    overflow: hidden;
	}
	/* removes scroll when modal is opened */
	.no-scroll {
	  overflow: hidden;
	}
	/* overlay covers everything */
	.simple-modal-overlay,
	.simple-animated-modal-overlay {
	  position: fixed;
	  top: 0;
	  bottom: 0;
	  right: 0;
	  left: 0;
	  background: #fff;
	  opacity: .8;
	  z-index: 666;
	  cursor: pointer;
	}
	.simple-modal-overlay[data-background-click="disabled"],
	.simple-animated-modal-overlay[data-background-click="disabled"] {
	  cursor: auto;
	}
	.simple-animated-modal-overlay  {
	  /*animation: fadewhite ease .5s 1 normal ;*/
	}

	@keyframes fadewhite {
	  0% {
	    opacity: 0;
	  }
	  100% {
	    opacity: .8;
	  }
	}
	/* modal */
	.simple-modal,
	.simple-animated-modal {
		font-family: "Open Sans", sans-serif;
	  position: fixed;
	  left: 50%;
    transform: translate(-50%, 0);
	  top: 5%;
	  width: 70%;
	  max-height: 98vh;
	  border: 2px solid #fc9802;
	  background: #f4f2c8;
	  z-index: 667;
	  padding: 2em 2em 6em 2em;
	  right: auto;
	  overflow: hidden;
	}

	.simple-animated-modal__content {
		text-align: center;
	}
/* "Yes, I'm (name)" button */
	.simple-modal-close,
	.simple-animated-modal-close,
	.custom-link-text {
	  position: relative;
    bottom: 10px;
    left: 50%;
    transform: translate(-50%, 0);
    margin: 1.6em auto .4em auto;
    background-color: #2f9d26;
    font-weight: normal;
    font-size: 1em;
    color: rgb(254, 254, 255);
    box-shadow: none;
    padding: 1em 2em;
    border-radius: 0.25em;
    border-width: initial;
    border-style: none;
    border-color: initial;
    border-image: initial;
    transition: all 0.25s linear 0s;
    cursor: pointer;
	}
	.simple-modal-close:focus,
	.simple-modal-close:hover,
	.simple-modal-close:active {
	  outline: 1px dotted #fff;
	}
	.simple-animated-modal-close:hover,
	.simple-animated-modal-close:active,
	.simple-modal-close:hover,
	.simple-modal-close:active {
	  background-color: #44dc38;
	}
	/* "No, I'm not (name), get me a new link" button */
	.custom-link-text {
		position: static;
		bottom: auto;
		left: auto;
		transform: none;
		margin: auto;
		background-color: #aa0627;
		text-decoration: none;
	}
	.custom-link-text:hover,
	.custom-link-text:focus {
		background-color: #e00834;
	}

	.simple-animated-modal {
	  /*animation: apparition ease .5s 1 normal ;*/
	}

	@keyframes apparition {
	  0% {
	    opacity: 0;
	    max-height: 0;
	    width: 0;
	    left: 50%;
	  }
	  100% {
	    opacity: 1;
	    max-height: 100%;
	    width: 70%;
	    left: 15%;
	  }
	}

	/* tablet */
	@media (max-width: 55.625em) {

	  .simple-modal,
	  .simple-animated-modal {
	    left: 50%;
    transform: translate(-50%, 0);
	    top: 5%;
	    height: 50vh;
	    width: 90%;
	    overflow: hidden;
	  }

	}

	/* mobile */
	@media (max-width: 44.375em) {

	  .simple-modal,
	  .simple-animated-modal {
	    left: 50%;
    transform: translate(-50%, 0);
	    top: 1%;
	    width: 98%;
	    height: 50vh;
	    overflow: hidden;
	  }

	}
</style>